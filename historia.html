<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DIREITOS EM JOGO</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #2b2727;
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.4;
        }

        /* Tela de seleção de jogadores */
        .player-selection {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(26, 26, 26, 0.95);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .selection-content {
            background: #2d2d2d;
            padding: 40px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #404040;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            max-width: 500px;
            width: 90%;
        }

        .selection-title {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: #f0f0f0;
        }

        .selection-subtitle {
            font-size: 1rem;
            color: #b0b0b0;
            margin-bottom: 30px;
        }

        .player-count-selector {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .player-count-btn {
            background: #3d3d3d;
            border: 2px solid #555;
            color: #e0e0e0;
            padding: 12px 20px;
            border-radius: 6px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
            min-width: 120px;
        }

        .player-count-btn:hover {
            border-color: #777;
            background: #4d4d4d;
        }

        .player-count-btn.selected {
            background: #4a90e2;
            color: white;
            border-color: #4a90e2;
        }

        .start-game-btn {
            background: #4a90e2;
            border: none;
            color: white;
            padding: 12px 30px;
            border-radius: 6px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: background 0.2s ease;
            margin-top: 20px;
        }

        .start-game-btn:hover {
            background: #357abd;
        }

        .game-container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 320px;
            gap: 30px;
            opacity: 0;
            animation: fadeIn 0.5s ease-out 0.2s forwards;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        .game-title {
            grid-column: 1 / -1;
            text-align: center;
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 30px;
            color: #ffffff;
            padding-bottom: 10px;
            border-bottom: 2px solid #ddd;
        }

        .board-container {
            background: white;
            border-radius: 8px;
            padding: 20px;
            border: 1px solid #ddd;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .board {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            grid-template-rows: repeat(5, 1fr);
            gap: 6px;
            aspect-ratio: 6/5;
            background: #f9f9f9;
            padding: 15px;
            border-radius: 6px;
            border: 1px solid #e0e0e0;
        }

        .cell {
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-weight: 500;
            font-size: 0.8rem;
            color: #555;
            position: relative;
            min-height: 60px;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .cell:hover {
            background: #f8f9fa;
            border-color: #999;
        }

        .cell-number {
            position: absolute;
            top: 3px;
            left: 3px;
            font-size: 0.7rem;
            background: #666;
            color: white;
            padding: 2px 5px;
            border-radius: 3px;
            font-weight: 600;
        }

        .cell-icon {
            font-size: 1.5rem;
            margin: 2px 0;
        }

        .cell-text {
            font-size: 0.6rem;
            text-align: center;
            margin-top: 2px;
            color: #666;
        }

        /* Tipos de casas */
        .question-cell { 
            background: #fff9e6;
            border-color: #f0c674;
        }
        .challenge-cell { 
            background: #fff0f0;
            border-color: #cc7a7a;
        }
        .achievement-cell { 
            background: #f0fff0;
            border-color: #7acc7a;
        }
        .penalty-cell { 
            background: #fff5e6;
            border-color: #e6a366;
        }
        .start-cell { 
            background: #f0f0ff;
            border-color: #9999cc;
        }

        .players {
            position: absolute;
            bottom: 2px;
            right: 2px;
            display: flex;
            gap: 2px;
            flex-wrap: wrap;
            max-width: 25px;
        }

        .player-token {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border: 1px solid #333;
            font-size: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
        }

        .player1 { background: #e74c3c; }
        .player2 { background: #3498db; }
        .player3 { background: #27ae60; }
        .player4 { background: #f39c12; }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .sidebar-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #ddd;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .section-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #2c3e50;
            border-bottom: 1px solid #eee;
            padding-bottom: 8px;
        }

        .turn-info {
            text-align: center;
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .dice-container {
            text-align: center;
            margin: 20px 0;
        }

        .dice {
            font-size: 3rem;
            margin: 10px 0;
            color: #666;
        }

        .roll-btn {
            background: #2c3e50;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 6px;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .roll-btn:hover:not(:disabled) {
            background: #34495e;
        }

        .roll-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
        }

        .player-score {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 10px 0;
            padding: 10px;
            border-radius: 6px;
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            transition: all 0.2s ease;
        }

        .player-score.active {
            background: #e8f4fd;
            border-color: #3498db;
            border-left: 4px solid #3498db;
        }

        .player-info {
            font-weight: 500;
        }

        .player-name {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .player-position {
            font-size: 0.85rem;
            color: #666;
        }

        .achievements {
            display: flex;
            gap: 2px;
            align-items: center;
        }

        .achievement-star {
            font-size: 1rem;
            color: #f39c12;
        }

        .achievement-empty {
            font-size: 1rem;
            color: #ddd;
        }

        .message-area {
            min-height: 150px;
            max-height: 250px;
            overflow-y: auto;
        }

        #messages {
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .message {
            margin-bottom: 8px;
            padding: 6px 8px;
            background: #f8f9fa;
            border-radius: 4px;
            border-left: 3px solid #3498db;
        }

        .message-area::-webkit-scrollbar {
            width: 6px;
        }

        .message-area::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }

        .message-area::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 3px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            color: #333;
            padding: 30px;
            border-radius: 8px;
            max-width: 600px;
            margin: 20px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            border: 1px solid #ddd;
        }

        .modal h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3rem;
        }

        .modal p {
            line-height: 1.6;
            margin-bottom: 25px;
            font-size: 1rem;
        }

        .answer-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 6px;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.2s ease;
            font-size: 0.9rem;
        }

        .answer-btn:hover {
            background: #2980b9;
        }

        .close-btn {
            background: #2c3e50;
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 15px;
            font-size: 1rem;
        }

        .close-btn:hover {
            background: #34495e;
        }

        @media (max-width: 1024px) {
            .game-container {
                grid-template-columns: 1fr;
                gap: 20px;
            }
        }

        @media (max-width: 768px) {
            .game-title {
                font-size: 1.5rem;
            }
            
            .cell {
                font-size: 0.7rem;
                min-height: 50px;
            }
            
            .cell-icon {
                font-size: 1.2rem;
            }
            
            .player-token {
                width: 14px;
                height: 14px;
                font-size: 7px;
            }
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- Tela de seleção de jogadores -->
    <div class="player-selection" id="player-selection">
        <div class="selection-content">
            <h1 class="selection-title">Leis Trabalhistas</h1>
            <p class="selection-subtitle">Revolução Industrial - Jogo Educativo</p>
            
            <h3 style="margin-bottom: 20px; color: #666;">Quantos jogadores?</h3>
            
            <div class="player-count-selector">
                <button class="player-count-btn" data-players="2">2 Jogadores</button>
                <button class="player-count-btn" data-players="3">3 Jogadores</button>
                <button class="player-count-btn" data-players="4">4 Jogadores</button>
            </div>
            
            <button class="start-game-btn" id="start-game-btn" onclick="startGame()">Iniciar Jogo</button>
        </div>
    </div>

    <div class="game-container" id="game-container">
        <h1 class="game-title">Leis Trabalhistas na Revolução Industrial</h1>
        
        <div class="board-container">
            <div class="board" id="board"></div>
        </div>
        
        <div class="sidebar">
            <div class="sidebar-section">
                <div class="turn-info" id="turn-info">Turno do Jogador 1</div>
                <div class="dice-container">
                    <div class="dice" id="dice">⚀</div>
                    <button class="roll-btn" id="roll-btn" onclick="rollDice()">Rolar Dado</button>
                </div>
            </div>
            
            <div class="sidebar-section">
                <h3 class="section-title">Placar de Conquistas</h3>
                <div id="players-list"></div>
            </div>
            
            <div class="sidebar-section">
                <h3 class="section-title">Registro do Jogo</h3>
                <div class="message-area">
                    <div id="messages">Bem-vindos ao jogo! O primeiro jogador a conseguir 5 conquistas trabalhistas vence!</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para perguntas e desafios -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <h3 id="modal-title"></h3>
            <p id="modal-content"></p>
            <div id="modal-buttons"></div>
        </div>
    </div>

    <script>
        // Configurações do jogo
        const BOARD_SIZE = 30;
        const WIN_CONDITION = 5;
        let PLAYERS_COUNT = 2;

        // Estado do jogo
        let gameState = {
            players: [],
            currentPlayer: 0,
            gameEnded: false,
            lastRoll: 0,
            gameStarted: false,
            usedQuestions: [] // Array para rastrear perguntas já usadas
        };

        // Nomes dos jogadores
        const playerNames = ['Jogador 1', 'Jogador 2', 'Jogador 3', 'Jogador 4'];
        const playerColors = ['#e74c3c', '#3498db', '#27ae60', '#f39c12'];

        // Seleção de número de jogadores
        document.querySelectorAll('.player-count-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.player-count-btn').forEach(b => b.classList.remove('selected'));
                this.classList.add('selected');
                PLAYERS_COUNT = parseInt(this.dataset.players);
            });
        });

        // Iniciar jogo
        function startGame() {
            if (!document.querySelector('.player-count-btn.selected')) {
                alert('Selecione o número de jogadores primeiro!');
                return;
            }
            
            document.getElementById('player-selection').classList.add('hidden');
            document.getElementById('game-container').style.display = 'grid';
            
            initGame();
        }

        // Perguntas sobre leis trabalhistas
        const questions = [
        {
                question: "Qual período abrangeu a Primeira Revolução Industrial?",
                answers: ["1700-1800", "1760-1850", "1800-1900"],
                correct: 1,
                explanation: "A Primeira Revolução Industrial durou de 1760 até meados de 1850, quando se iniciou a Segunda Revolução Industrial."
            },
            {
                question: "Qual país foi pioneiro na Primeira Revolução Industrial?",
                answers: ["França", "Inglaterra", "Alemanha"],
                correct: 1,
                explanation: "A Inglaterra foi pioneira na Primeira Revolução Industrial, liderando as transformações industriais."
            },
            {
                question: "Qual foi a principal mudança no processo produtivo?",
                answers: ["Manufatura para maquinofatura", "Artesanato para manufatura", "Rural para urbano"],
                correct: 0,
                explanation: "A principal característica foi a substituição da manufatura (humanos organizando) pela maquinofatura (máquinas comandam o processo)."
            },
            {
                question: "Quantas horas diárias podiam trabalhar os operários nas fábricas?",
                answers: ["8 horas", "12 horas", "Mais de 14 horas"],
                correct: 2,
                explanation: "As jornadas eram exaustivas e podiam ultrapassar 14 horas diárias, sem proteção legal."
            },
            {
                question: "Qual foi o principal impacto do Factory Act de 1833 no sistema de fiscalização trabalhista?",
                answers: [
                  "Aboliu a necessidade de inspeção nas fábricas",
                  "Criou um corpo de inspetores responsáveis por garantir o cumprimento das normas trabalhistas",
                  "Deu às fábricas liberdade total para determinar suas próprias regras trabalhistas"],
                correct: 1,
                explanation: "O Factory Act de 1833 estabeleceu pela primeira vez um sistema de inspeção, com inspetores nomeados pelo governo para fiscalizar o cumprimento das leis nas fábricas."
            },
            {
                question: "Como a legislação trabalhista da Primeira Revolução Industrial refletia os interesses da elite industrial?",
                answers: [
                  "Limitava o poder dos patrões e dava total liberdade aos trabalhadores",
                  "Equilibrava igualmente os direitos de trabalhadores e empregadores",
                  "Era limitada e visava apenas mitigar excessos extremos sem comprometer a produtividade das fábricas"],
                correct: 2,
                explanation: "As leis trabalhistas iniciais buscavam apenas conter abusos graves, sem prejudicar o funcionamento das fábricas ou os interesses da elite industrial que lucrava com a exploração do trabalho."
            },
            {
                question: "O que caracterizava as condições de trabalho segundo Delgado (2003)?",
                answers: ["Organização e segurança", "Improvisação e insalubridade", "Regulamentação rígida"],
                correct: 1,
                explanation: "Segundo Delgado, o ambiente era marcado por improvisação, insalubridade, falta de segurança e exploração."
            },
            {
                question: "O que levou ao surgimento da consciência de classe operária?",
                answers: ["Leis trabalhistas", "Concentração nas fábricas", "Aumento salarial"],
                correct: 1,
                explanation: "A concentração de trabalhadores nas fábricas proporcionou o surgimento de uma consciência de classe."
            },
            {
                question: "Como os trabalhadores se organizaram para lutar por direitos?",
                answers: ["Individualmente", "Em sindicatos", "Através do governo"],
                correct: 1,
                explanation: "Os trabalhadores se reuniram em associações coletivas, conhecidas como sindicatos, para enfrentar as condições desumanas."
            },
            {
                question: "Qual era uma das principais reivindicações dos primeiros sindicatos?",
                answers: ["Aumento de produção", "Redução da carga horária", "Mais máquinas"],
                correct: 1,
                explanation: "Os sindicatos lutavam por redução da carga horária, melhores condições e aumento de salários."
            },
            {
                question: "Qual foi o papel da classe trabalhadora na conquista das primeiras reformas trabalhistas durante a Revolução Industrial?",
                answers: [
                  "Foi passiva e não teve influência nas mudanças legais",
                  "Organizou protestos, petições e mobilizações que pressionaram o Parlamento a agir",
                  "Conseguiu implementar diretamente leis sem a mediação do Parlamento"],
                correct: 1,
                explanation: "A classe trabalhadora teve papel fundamental nas primeiras reformas, mobilizando-se por meio de greves, protestos e movimentos sociais que pressionaram o governo britânico a criar leis como o Factory Act."

            },
            {
                question: "Como o trabalho infantil foi justificado durante a Primeira Revolução Industrial, apesar de suas consequências nocivas?",
                answers: [
                  "Era considerado um meio de disciplinar as crianças e complementar a renda familiar",
                  "Era proibido por tradição cultural",
                  "Era visto como parte da formação educacional obrigatória"],
                correct: 0,
                explanation: "O trabalho infantil era amplamente justificado como necessário para a sobrevivência das famílias pobres e como uma forma de ensinar disciplina, apesar das condições abusivas a que as crianças eram submetidas."

            },
            {
                question: "Uma das primeiras conquistas trabalhistas foi:",
                answers: ["Férias pagas", "Redução da jornada diária", "Seguro desemprego"],
                correct: 1,
                explanation: "Entre as primeiras conquistas estava a redução da jornada de trabalho diária."
            },
            {
                question: "Em relação ao trabalho feminino, as primeiras leis:",
                answers: ["Proibiram totalmente", "Proibiram em ambientes perigosos", "Não regulamentaram"],
                correct: 1,
                explanation: "As leis proibiram o trabalho feminino em ambientes insalubres ou perigosos."
            },
            {
                question: "Segundo José Cairo Júnior (2013), as primeiras leis foram:",
                answers: ["Suficientes", "Fundamentais apesar de tímidas", "Irrelevantes"],
                correct: 1,
                explanation: "Segundo Cairo Júnior, essas primeiras leis, embora tímidas, foram fundamentais para avanços posteriores."
            },
            {
                question: "No Brasil, quando começaram as influências das leis trabalhistas europeias?",
                answers: ["Década de 1920", "Década de 1930", "Década de 1940"],
                correct: 1,
                explanation: "Somente a partir da década de 1930, no governo Vargas, essas ideias influenciaram a legislação brasileira."
            },
            {
                question: "Qual governo brasileiro criou as primeiras leis trabalhistas efetivas?",
                answers: ["Getúlio Vargas", "Juscelino Kubitschek", "Washington Luís"],
                correct: 0,
                explanation: "Foi no governo de Getúlio Vargas que se criaram carteira de trabalho, jornada de 8 horas e direito à aposentadoria."
            },
            {
                question: "Uma criação do governo Vargas foi:",
                answers: ["Trabalho infantil", "Carteira de trabalho", "Jornada de 12 horas"],
                correct: 1,
                explanation: "O governo Vargas criou a carteira de trabalho, limitou a jornada a 8 horas e estabeleceu direito à aposentadoria."
            },
            {
                question: "Qual foi a jornada de trabalho estabelecida no Brasil na década de 1930?",
                answers: ["6 horas", "8 horas", "10 horas"],
                correct: 1,
                explanation: "A jornada de trabalho foi limitada a 8 horas diárias durante o governo Vargas."
            },
            {
                question: "As leis trabalhistas de Vargas beneficiaram principalmente:",
                answers: ["Trabalhador rural", "Trabalhador urbano", "Todos igualmente"],
                correct: 1,
                explanation: "As leis de proteção foram criadas especificamente para o trabalhador urbano."
            },
            {
                question: "O que caracterizou o início das relações de trabalho industriais?",
                answers: ["Trabalho escravo", "Trabalho assalariado", "Trabalho voluntário"],
                correct: 1,
                explanation: "Estabeleceram-se novas relações com o surgimento do trabalho assalariado e da divisão do trabalho."
            },
            {
                question: "Durante a Primeira Revolução Industrial, havia legislação trabalhista?",
                answers: ["Sim, completa", "Não havia", "Apenas básica"],
                correct: 1,
                explanation: "Durante a Primeira Revolução Industrial, não havia legislação trabalhista que protegesse os operários."
            },
            {
                question: "O que motivou a contratação indiscriminada nas fábricas?",
                answers: ["Leis trabalhistas", "Crescente demanda", "Caridade social"],
                correct: 1,
                explanation: "A crescente demanda das fábricas por mão de obra levou à contratação indiscriminada de homens, mulheres e crianças."
            },
            {
                question: "Qual era uma característica das primeiras fábricas segundo a improvisação mencionada?",
                answers: ["Planejamento rigoroso", "Falta de segurança", "Excesso de regras"],
                correct: 1,
                explanation: "O ambiente era marcado por improvisação, com destaque à insalubridade e falta de segurança."
            },
            {
                question: "Os primeiros conflitos entre operários e patrões configuraram:",
                answers: ["Parcerias comerciais", "Lutas de classe", "Acordos pacíficos"],
                correct: 1,
                explanation: "Essas reivindicações deram início aos primeiros conflitos, configurando as primeiras lutas de classe da era industrial."
            }
        ];

        // Desafios e eventos
        const challenges = [
            {
                type: "positive",
                message: "Você organizou uma greve pacífica e conquistou melhores condições! Ganhe 1 conquista trabalhista!",
                effect: () => gameState.players[gameState.currentPlayer].achievements++
            },
            {
                type: "negative", 
                message: "Acidente na fábrica por falta de segurança! Volte 3 casas para se recuperar.",
                effect: () => movePlayer(gameState.currentPlayer, -3)
            },
            {
                type: "positive",
                message: "Você fundou um sindicato para defender os direitos dos trabalhadores! Ganhe 1 conquista!",
                effect: () => gameState.players[gameState.currentPlayer].achievements++
            },
            {
                type: "negative",
                message: "Demitido por liderar protestos trabalhistas! Volte 2 casas.",
                effect: () => movePlayer(gameState.currentPlayer, -2)
            },
            {
                type: "positive",
                message: "Sua proposta de lei foi aprovada no parlamento! Avance 3 casas!",
                effect: () => movePlayer(gameState.currentPlayer, 3)
            },
            {
                type: "positive",
                message: "Você denunciou trabalho infantil e salvou muitas crianças! Ganhe 1 conquista!",
                effect: () => gameState.players[gameState.currentPlayer].achievements++
            }
        ];

        // Configuração das casas especiais
        const specialCells = {
            3: "question", 6: "challenge", 9: "achievement", 12: "penalty",
            15: "question", 18: "challenge", 21: "achievement", 24: "penalty",
            27: "question", 30: "achievement"
        };

        // Inicialização do jogo
        function initGame() {
            gameState.players = [];
            gameState.currentPlayer = 0;
            gameState.gameEnded = false;
            gameState.gameStarted = true;
            gameState.usedQuestions = []; // Resetar perguntas usadas

            // Criar jogadores
            for (let i = 0; i < PLAYERS_COUNT; i++) {
                gameState.players.push({
                    id: i + 1,
                    name: playerNames[i],
                    position: 1,
                    achievements: 0,
                    color: `player${i + 1}`
                });
            }

            createBoard();
            updateDisplay();
            addMessage(`Jogo iniciado com ${PLAYERS_COUNT} jogadores! ${playerNames[0]}, role o dado para começar!`);
        }

        // Criar o tabuleiro
        function createBoard() {
            const board = document.getElementById('board');
            board.innerHTML = '';

            for (let i = 1; i <= BOARD_SIZE; i++) {
                const cell = document.createElement('div');
                cell.className = 'cell';
                cell.id = `cell-${i}`;

                // Número da casa
                const cellNumber = document.createElement('div');
                cellNumber.className = 'cell-number';
                cellNumber.textContent = i;
                cell.appendChild(cellNumber);

                // Ícone e texto da casa especial
                if (specialCells[i]) {
                    const icon = document.createElement('div');
                    icon.className = 'cell-icon';
                    cell.classList.add(`${specialCells[i]}-cell`);
                    
                    const text = document.createElement('div');
                    text.className = 'cell-text';
                    
                    switch (specialCells[i]) {
                        case 'question':
                            icon.textContent = '?';
                            text.textContent = 'Pergunta';
                            break;
                        case 'challenge':
                            icon.textContent = '!';
                            text.textContent = 'Desafio';
                            break;
                        case 'achievement':
                            icon.textContent = '★';
                            text.textContent = 'Conquista';
                            break;
                        case 'penalty':
                            icon.textContent = '⚠';
                            text.textContent = 'Penalidade';
                            break;
                    }
                    cell.appendChild(icon);
                    cell.appendChild(text);
                }

                if (i === 1) {
                    cell.classList.add('start-cell');
                    const startIcon = document.createElement('div');
                    startIcon.className = 'cell-icon';
                    startIcon.textContent = '▶';
                    cell.appendChild(startIcon);
                    
                    const startText = document.createElement('div');
                    startText.className = 'cell-text';
                    startText.textContent = 'Início';
                    cell.appendChild(startText);
                }

                // Container para tokens dos jogadores
                const playersDiv = document.createElement('div');
                playersDiv.className = 'players';
                cell.appendChild(playersDiv);

                board.appendChild(cell);
            }
        }

        // Atualizar exibição
        function updateDisplay() {
            updatePlayerPositions();
            updateScoreboard();
            updateTurnInfo();
        }

        // Atualizar posições dos jogadores
        function updatePlayerPositions() {
            // Limpar todas as posições
            document.querySelectorAll('.players').forEach(p => p.innerHTML = '');

            // Colocar jogadores nas posições
            gameState.players.forEach(player => {
                const cell = document.getElementById(`cell-${player.position}`);
                const playersDiv = cell.querySelector('.players');
                
                const token = document.createElement('div');
                token.className = `player-token ${player.color}`;
                token.textContent = player.id;
                token.title = player.name;
                playersDiv.appendChild(token);
            });
        }

        // Atualizar placar
        function updateScoreboard() {
            const playersList = document.getElementById('players-list');
            playersList.innerHTML = '';

            gameState.players.forEach((player, index) => {
                const playerDiv = document.createElement('div');
                playerDiv.className = 'player-score';
                if (index === gameState.currentPlayer && !gameState.gameEnded) {
                    playerDiv.classList.add('active');
                }

                const playerInfo = document.createElement('div');
                playerInfo.className = 'player-info';
                playerInfo.innerHTML = `
                    <div class="player-name" style="color: ${playerColors[index]}">${player.name}</div>
                    <div class="player-position">Casa ${player.position}</div>
                `;

                const achievements = document.createElement('div');
                achievements.className = 'achievements';
                
                for (let i = 0; i < WIN_CONDITION; i++) {
                    const star = document.createElement('span');
                    if (i < player.achievements) {
                        star.className = 'achievement-star';
                        star.textContent = '★';
                    } else {
                        star.className = 'achievement-empty';
                        star.textContent = '☆';
                    }
                    achievements.appendChild(star);
                }

                playerDiv.appendChild(playerInfo);
                playerDiv.appendChild(achievements);
                playersList.appendChild(playerDiv);
            });
        }

        // Atualizar informações do turno
        function updateTurnInfo() {
            const turnInfo = document.getElementById('turn-info');
            if (gameState.gameEnded) {
                turnInfo.textContent = 'Jogo Finalizado!';
            } else {
                const currentPlayer = gameState.players[gameState.currentPlayer];
                turnInfo.textContent = `Turno: ${currentPlayer.name}`;
            }
        }

        // Rolar dado
        function rollDice() {
            if (gameState.gameEnded) return;

            const roll = Math.floor(Math.random() * 6) + 1;
            gameState.lastRoll = roll;

            // Atualizar dado
            const diceElement = document.getElementById('dice');
            const rollBtn = document.getElementById('roll-btn');
            const diceNumbers = ['⚀', '⚁', '⚂', '⚃', '⚄', '⚅'];
            
            rollBtn.disabled = true;
            
            // Animação simples do dado
            let counter = 0;
            const animation = setInterval(() => {
                diceElement.textContent = diceNumbers[Math.floor(Math.random() * 6)];
                counter++;
                if (counter > 10) {
                    clearInterval(animation);
                    diceElement.textContent = diceNumbers[roll - 1];
                    setTimeout(() => {
                        movePlayerWithRoll(gameState.currentPlayer, roll);
                    }, 300);
                }
            }, 100);

            const currentPlayer = gameState.players[gameState.currentPlayer];
            addMessage(`${currentPlayer.name} rolou o dado e tirou ${roll}!`);
        }

        // Mover jogador com resultado do dado (com correção do loop infinito)
        function movePlayerWithRoll(playerIndex, steps) {
            const player = gameState.players[playerIndex];
            const newPosition = player.position + steps;
            
            // Se ultrapassar a casa 30, volta ao início
            if (newPosition >= BOARD_SIZE) {
                player.position = 1;
                addMessage(`${player.name} chegou ao final e voltou ao início! Casa ${player.position}`);
            } else {
                player.position = newPosition;
                addMessage(`${player.name} avançou para a casa ${player.position}`);
            }
            
            updateDisplay();
            checkSpecialCell();
        }

        // Mover jogador (para penalidades e bônus)
        function movePlayer(playerIndex, steps) {
            const player = gameState.players[playerIndex];
            let newPosition = player.position + steps;
            
            // Garantir que não saia dos limites do tabuleiro
            if (newPosition < 1) {
                newPosition = 1;
            } else if (newPosition >= BOARD_SIZE) {
                newPosition = 1; // Volta ao início se ultrapassar
                addMessage(`${player.name} voltou ao início! Casa ${newPosition}`);
            }
            
            if (newPosition !== player.position) {
                player.position = newPosition;
                if (steps > 0 && newPosition !== 1) {
                    addMessage(`${player.name} avançou para a casa ${newPosition}`);
                } else if (steps < 0) {
                    addMessage(`${player.name} recuou para a casa ${newPosition}`);
                }
                updateDisplay();
            }
        }

        // Verificar casa especial
        function checkSpecialCell() {
            const currentPlayer = gameState.players[gameState.currentPlayer];
            const cellType = specialCells[currentPlayer.position];

            if (cellType) {
                switch (cellType) {
                    case 'question':
                        showQuestion();
                        return; // Não passa o turno ainda
                    case 'challenge':
                        showChallenge();
                        break;
                    case 'achievement':
                        currentPlayer.achievements++;
                        addMessage(`${currentPlayer.name} conquistou um direito trabalhista!`);
                        break;
                    case 'penalty':
                        movePlayer(gameState.currentPlayer, -2);
                        addMessage(`${currentPlayer.name} enfrentou dificuldades e voltou 2 casas!`);
                        break;
                }
            }

            setTimeout(() => {
                checkWinCondition();
                if (!gameState.gameEnded) {
                    nextTurn();
                }
            }, 1500);
        }

        // Mostrar pergunta
        function showQuestion() {
            // Selecionar pergunta que ainda não foi usada
            let availableQuestions = questions.filter((q, index) => !gameState.usedQuestions.includes(index));
            
            // Se todas as perguntas foram usadas, resetar a lista
            if (availableQuestions.length === 0) {
                gameState.usedQuestions = [];
                availableQuestions = questions;
            }
            
            const randomIndex = Math.floor(Math.random() * availableQuestions.length);
            const question = availableQuestions[randomIndex];
            const originalIndex = questions.indexOf(question);
            
            // Marcar pergunta como usada
            gameState.usedQuestions.push(originalIndex);
            
            const modal = document.getElementById('modal');
            const modalTitle = document.getElementById('modal-title');
            const modalContent = document.getElementById('modal-content');
            const modalButtons = document.getElementById('modal-buttons');

            modalTitle.textContent = 'Pergunta Trabalhista';
            modalContent.textContent = question.question;
            modalButtons.innerHTML = '';

            question.answers.forEach((answer, index) => {
                const btn = document.createElement('button');
                btn.className = 'answer-btn';
                btn.textContent = answer;
                btn.onclick = () => answerQuestion(index === question.correct, question.explanation);
                modalButtons.appendChild(btn);
            });

            modal.style.display = 'flex';
        }

        // Responder pergunta
        function answerQuestion(correct, explanation) {
            const modal = document.getElementById('modal');
            const modalContent = document.getElementById('modal-content');
            const modalButtons = document.getElementById('modal-buttons');
            const currentPlayer = gameState.players[gameState.currentPlayer];

            if (correct) {
                currentPlayer.achievements++;
                modalContent.innerHTML = `<strong style="color: #27ae60;">✓ Resposta Correta!</strong><br><br>${explanation}<br><br><em>Você conquistou um direito trabalhista!</em>`;
                addMessage(`${currentPlayer.name} acertou a pergunta e ganhou uma conquista!`);
            } else {
                modalContent.innerHTML = `<strong style="color: #e74c3c;">✗ Resposta Incorreta!</strong><br><br><strong>Explicação:</strong> ${explanation}`;
                addMessage(`${currentPlayer.name} errou a pergunta, mas aprendeu algo novo!`);
            }

            modalButtons.innerHTML = '<button class="close-btn" onclick="closeModal()">Continuar</button>';
            updateDisplay();
        }

        // Mostrar desafio
        function showChallenge() {
            const challenge = challenges[Math.floor(Math.random() * challenges.length)];
            const modal = document.getElementById('modal');
            const modalTitle = document.getElementById('modal-title');
            const modalContent = document.getElementById('modal-content');
            const modalButtons = document.getElementById('modal-buttons');
            const currentPlayer = gameState.players[gameState.currentPlayer];

            modalTitle.textContent = 'Evento Histórico';
            modalContent.textContent = challenge.message;
            modalButtons.innerHTML = '<button class="close-btn" onclick="closeModal()">Continuar</button>';

            challenge.effect();
            addMessage(`${currentPlayer.name} enfrentou um evento da Revolução Industrial!`);
            updateDisplay();
            modal.style.display = 'flex';
        }

        // Fechar modal
        function closeModal() {
            document.getElementById('modal').style.display = 'none';
            setTimeout(() => {
                checkWinCondition();
                if (!gameState.gameEnded) {
                    nextTurn();
                }
            }, 500);
        }

        // Verificar condição de vitória
        function checkWinCondition() {
            const winner = gameState.players.find(player => player.achievements >= WIN_CONDITION);
            if (winner) {
                gameState.gameEnded = true;
                addMessage(`🎉 ${winner.name.toUpperCase()} VENCEU! Conquistou ${winner.achievements} direitos trabalhistas! 🎉`);
                document.getElementById('roll-btn').disabled = true;
                updateDisplay();
            }
        }

        // Próximo turno
        function nextTurn() {
            if (!gameState.gameEnded) {
                gameState.currentPlayer = (gameState.currentPlayer + 1) % PLAYERS_COUNT;
                document.getElementById('roll-btn').disabled = false;
                updateDisplay();
                
                const nextPlayer = gameState.players[gameState.currentPlayer];
                addMessage(`Agora é a vez de ${nextPlayer.name}!`);
            }
        }

        // Adicionar mensagem
        function addMessage(message) {
            const messagesDiv = document.getElementById('messages');
            const timestamp = new Date().toLocaleTimeString();
            const newMessage = document.createElement('div');
            newMessage.className = 'message';
            newMessage.innerHTML = `<strong>[${timestamp}]</strong> ${message}`;
            messagesDiv.insertBefore(newMessage, messagesDiv.firstChild);
            
            // Limitar número de mensagens
            const messages = messagesDiv.children;
            if (messages.length > 10) {
                messagesDiv.removeChild(messages[messages.length - 1]);
            }
        }

        // Inicializar seleção padrão
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelector('[data-players="2"]').classList.add('selected');
            PLAYERS_COUNT = 2;
        });
    </script>
</body>
</html>